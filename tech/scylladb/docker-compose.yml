services:
  scylla_node1:
    image: scylladb/scylla:2025.3
    container_name: scylla_node1
    command: --smp 2 --memory 2G --overprovisioned 1 --authenticator PasswordAuthenticator --authorizer CassandraAuthorizer
    ports:
      - "9042:9042" # CQL
      - "7000:7000" # inter-node communication
      - "7001:7001" # TLS inter-node
      - "7199:7199" # JMX
      - "9180:9180"
    networks:
      scylla-cluster:
        ipv4_address: 172.28.1.2

  scylla_node2:
    image: scylladb/scylla:2025.3
    container_name: scylla_node2
    command: --smp 2 --memory 2G --overprovisioned 1 --seeds=scylla_node1
    networks:
      scylla-cluster:
        ipv4_address: 172.28.1.3
    ports:
      - "9181:9180"

  scylla_node3:
    image: scylladb/scylla:2025.3
    container_name: scylla_node3
    command: --smp 2 --memory 2G --overprovisioned 1 --seeds=scylla_node1
    networks:
      scylla-cluster:
        ipv4_address: 172.28.1.4
    ports:
      - "9182:9180"

networks:
  scylla-cluster:
    driver: bridge
    ipam:
      config:
        - subnet: 172.28.0.0/16
